<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ficha de Personagem - Deserto de Cinzas</title>
  <link rel="stylesheet" href="ficha.css">
</head>
<body>
  <div class="ficha">
    <!-- Campos no topo/esquerdo -->
    <input type="text" id="nome" placeholder="Nome do Personagem">
    
    <!-- Campo Classe (select com opções) -->
    <select id="classe">
      <option value="">Selecione a Classe</option>
      <option value="saqueador">Saqueador do Deserto</option>
      <option value="psionico">Psiônico Aberrante</option>
      <option value="motorista">Motorista Mentecapto</option>
      <option value="tecnomago">Tecnomago Xamânico</option>
      <option value="sobrevivente">Sobrevivente Primevo</option>
      <option value="cultista">Cultista das Cinzas</option>
      <option value="mutante">Mutante do Mundo Morto</option>
      <option value="robo">Robô Livre</option>
      <option value="alien">Alien Destituído</option>
      <option value="catador">Catador Aflito</option>
    </select>
    
    <!-- Caixa para exibir automaticamente as características da classe selecionada -->
    <textarea id="caracteristicas" placeholder="Características de Classe"></textarea>

    <!-- Seções de Magias/Poderes (lado esquerdo) -->
    <textarea id="magicos" placeholder="Mágicos"></textarea>
    <textarea id="psiquicos" placeholder="Psíquicos"></textarea>
    <textarea id="mutacoes" placeholder="Mutações"></textarea>

    <!-- Atributos (centro) -->
    <input type="number" id="forca" placeholder="Força">
    <input type="number" id="agilidade" placeholder="Agilidade">
    <input type="number" id="presenca" placeholder="Presença">
    <input type="number" id="resistencia" placeholder="Resistência">
    <input type="number" id="vontade" placeholder="Vontade">

    <!-- PV e Chicletes (centro) -->
    <input type="number" id="pv" placeholder="PV">
    <input type="number" id="chicletes" placeholder="Chicletes">

    <!-- Armas e Equipamentos (topo/direita) -->
    <textarea id="armas" placeholder="Armas"></textarea>
    <textarea id="equipamentos" placeholder="Equipamentos"></textarea>

    <!-- Notas / Histórico (inferior/esquerdo) -->
    <textarea id="notas" placeholder="Notas / Histórico"></textarea>

    <!-- Caixa de Armaduras (lado direito) -->
    <textarea id="armadurarightside" placeholder="Armaduras"></textarea>

    <!-- Caixa extra para Chicletes Inferior -->
    <input type="number" id="chicletesBottom" placeholder="Chicletes Inferior">
  </div>
  
  <!-- Botão para salvar a ficha -->
  <button onclick="salvarFicha()">Salvar Ficha</button>
  
  <!-- Script para LocalStorage e atualização automática das informações da classe -->
  <script>
    // Objeto contendo as informações de cada classe
    const classDetails = {
      "saqueador": "Saqueador do Deserto:\nModificadores: +1 Força, +1 Presença, -2 Vontade\nPV Resistência: +1d12\nSorte: 1d3\nBônus: Pode causar +1 de dano em troca de perder 1 ponto de condição na arma. Não pode aprender magias ou poderes psiônicos.",
      "psionico": "Psiônico Aberrante:\nModificadores: +2 Vontade, -1 Força, -1 Resistência\nPV Resistência: +d4\nSorte: 1d2\nPermite o uso de poderes psíquicos com armaduras leves ou médias.",
      "motorista": "Motorista Mentecapto:\nModificadores: +1 Agilidade, +1 Presença, -1 Força, -1 Resistência\nPV Resistência: +d8\nSorte: 1d3\nTodos os testes de pilotagem têm ND -2.",
      "tecnomago": "Tecnomago Xamânico:\nModificadores: +2 Vontade, -1 Resistência, -1 Força\nPV Resistência: +d4\nSorte: 1d2\nPode usar poderes mágicos com armaduras leves ou médias.",
      "sobrevivente": "Sobrevivente Primevo:\nModificadores: +1 Resistência, -1 Vontade\nPV Resistência: +d10\nSorte: 1d3\nIncapaz de aprender magias.",
      "cultista": "Cultista das Cinzas:\nModificadores: +1 Presença, +1 Vontade, -1 Força, -1 Agilidade\nPV Resistência: +d6\nSorte: 1d2\nPode usar 'Vácuo' sem sofrer vício.",
      "mutante": "Mutante do Mundo Morto:\nModificadores: +2 Resistência, -1 Vontade, -1 Agilidade\nPV Resistência: +d8\nSorte: 1d2\nPermite rolar mutações (inclusive estéticas) sem penalidades.",
      "robo": "Robô Livre:\nModificadores: +1 Resistência, +1 Força, +1 Presença, -2 Vontade, -1 Agilidade\nPV Resistência: +d12\nSorte: 1d2\nPossui armadura natural; não pode usar magias, adquirir mutações ou poderes psiônicos.",
      "alien": "Alien Destituído:\nModificadores: +1 Presença, +1 Vontade, -1 Resistência, -1 Força\nPV Resistência: +d8\nSorte: 1d2\nTestes para resistir a efeitos mentais/mágicos têm ND -2.",
      "catador": "Catador Aflito:\nModificadores: +2 Agilidade, -1 Força, -1 Resistência\nPV Resistência: +d8\nSorte: 1d2\nVerificação especial para armas/armaduras (usa 1d8) e espaço extra para carga."
    };

    // Atualiza o campo de características com base na classe selecionada
    document.getElementById('classe').addEventListener('change', function() {
      var selected = this.value;
      if (selected && classDetails[selected]) {
        document.getElementById('caracteristicas').value = classDetails[selected];
      } else {
        document.getElementById('caracteristicas').value = "";
      }
    });

    // Função para salvar os dados da ficha no LocalStorage
    function salvarFicha() {
      const ficha = {
        nome: document.getElementById('nome').value,
        classe: document.getElementById('classe').value,
        caracteristicas: document.getElementById('caracteristicas').value,
        magicos: document.getElementById('magicos').value,
        psiquicos: document.getElementById('psiquicos').value,
        mutacoes: document.getElementById('mutacoes').value,
        forca: document.getElementById('forca').value,
        agilidade: document.getElementById('agilidade').value,
        presenca: document.getElementById('presenca').value,
        resistencia: document.getElementById('resistencia').value,
        vontade: document.getElementById('vontade').value,
        pv: document.getElementById('pv').value,
        chicletes: document.getElementById('chicletes').value,
        armas: document.getElementById('armas').value,
        equipamentos: document.getElementById('equipamentos').value,
        notas: document.getElementById('notas').value,
        armadurarightside: document.getElementById('armadurarightside').value,
      };

      localStorage.setItem('fichaData', JSON.stringify(ficha));
      alert('Ficha salva com sucesso!');
    }

    // Função para carregar os dados salvos (se houver)
    function carregarFicha() {
      const fichaSalva = localStorage.getItem('fichaData');
      if (fichaSalva) {
        const ficha = JSON.parse(fichaSalva);
        document.getElementById('nome').value = ficha.nome || '';
        document.getElementById('classe').value = ficha.classe || '';
        document.getElementById('caracteristicas').value = ficha.caracteristicas || '';
        document.getElementById('magicos').value = ficha.magicos || '';
        document.getElementById('psiquicos').value = ficha.psiquicos || '';
        document.getElementById('mutacoes').value = ficha.mutacoes || '';
        document.getElementById('forca').value = ficha.forca || '';
        document.getElementById('agilidade').value = ficha.agilidade || '';
        document.getElementById('presenca').value = ficha.presenca || '';
        document.getElementById('resistencia').value = ficha.resistencia || '';
        document.getElementById('vontade').value = ficha.vontade || '';
        document.getElementById('pv').value = ficha.pv || '';
        document.getElementById('chicletes').value = ficha.chicletes || '';
        document.getElementById('armas').value = ficha.armas || '';
        document.getElementById('equipamentos').value = ficha.equipamentos || '';
        document.getElementById('notas').value = ficha.notas || '';
        document.getElementById('armadurarightside').value = ficha.armadurarightside || '';
      }
    }

    // Carrega os dados salvos ao carregar a página
    window.onload = carregarFicha;
  </script>
</body>
</html>
